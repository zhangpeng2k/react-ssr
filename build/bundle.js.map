{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./server/index.js","webpack:///./src/App.js","webpack:///./src/component/Header.js","webpack:///./src/container/About.js","webpack:///./src/container/Index.js","webpack:///./src/container/User.js","webpack:///./src/store/index.js","webpack:///./src/store/store.js","webpack:///./src/store/user.js","webpack:///external \"axios\"","webpack:///external \"express\"","webpack:///external \"http-proxy-middleware\"","webpack:///external \"react\"","webpack:///external \"react-dom/server\"","webpack:///external \"react-redux\"","webpack:///external \"react-router-dom\"","webpack:///external \"redux\"","webpack:///external \"redux-thunk\""],"names":["store","getServerStore","app","express","use","proxy","target","changeOrigin","get","req","res","promises","routes","some","route","match","matchPath","path","loadData","component","promise","Promise","resolve","reject","then","push","all","content","renderToString","url","map","send","JSON","stringify","getState","error","console","log","listen","Index","exact","key","About","User","props","useState","count","setCount","useEffect","list","length","getIndexList","title","item","id","name","sotre","dispatch","connect","state","index","userinfo","best","getUserInfo","user","GET_LIST","changeList","type","server","$axios","data","defaultState","action","newState","reducer","combineReducers","indexReducer","userReducer","clientAxios","Axios","create","baseURL","serverAxios","createStore","applyMiddleware","thunk","withExtraArgument","getClientStore","window","_context","changeUserInfo"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./server/index.js\");\n","// 这里的node代码，会用babel处理\nimport React from 'react'\nimport {renderToString} from 'react-dom/server'\nimport express from 'express'\nimport {StaticRouter,matchPath,Route} from 'react-router-dom'\nimport {Provider} from 'react-redux'\nimport {getServerStore} from '../src/store/store'\nimport routes from '../src/App'\nimport Header from '../src/component/Header';\nimport proxy from 'http-proxy-middleware'\n\n\nconst store = getServerStore()\nconst app = express()\napp.use(express.static('public'))\n\n//客户端api开头\napp.use('/api',proxy({\n    target:'http://localhost:9090',\n    changeOrigin:true\n}))\n\napp.get('*',(req,res)=>{\n    // 获取根据路由渲染出的组件，并且拿到loadData方法，获取数据\n    \n    // if(req.url.startsWith('/api/')){\n    //     //不渲染页面 使用axios转发\n    // }\n\n    // 存储网络请求\n    const promises = []\n    \n    // 路由匹配\n    routes.some(route=>{\n        const match = matchPath(req.path,route)\n        if(match){\n            const {loadData} = route.component\n            if(loadData){\n                // 包装后\n                const promise = new Promise((resolve,reject)=>{\n                    loadData(store).then(resolve).catch(resolve)\n                })\n                promises.push(promise)\n                // promises.push(loadData(promise))\n                \n            }\n            \n        }\n    })\n    // 等待所有网络请求结束再渲染\n    Promise.all(promises).then(()=>{\n        \n        // 把react组件解析成html\n        const content = renderToString(\n            <Provider store={store}>\n                <StaticRouter location={req.url}>\n                    <Header></Header>\n                    {routes.map(route=>{\n                        return <Route {...route}></Route>\n                    })}\n                </StaticRouter>\n            </Provider>\n        )\n        res.send(`\n        <html>\n        <head>\n            <meta charset=\"utf-8\"/>\n            <title>react ssr</title>\n        </head>\n        <body>\n            <div id=\"root\">${content}</div>\n            <script>\n                window._context=${JSON.stringify(store.getState())}\n            </script>\n            <script src=\"/bundle.js\"></script>\n        </body>\n        </html>\n        `)\n    }).catch((error)=>{\n        console.log(error)\n        res.send('报错页面500')\n    })\n    \n})\napp.listen(9093,()=>{\n    console.log('监听完毕 http://localhost:9093/')\n})","import React,{useState} from 'react'\nimport {Route} from 'react-router-dom'\nimport Index from './container/Index'\nimport About from './container/About'\nimport User from './container/User'\n\n\n\n// export default (\n//     <div>\n//         <Route path=\"/\" exact component={Index}></Route>\n//         <Route path=\"/about\" exact component={About}></Route>\n        \n//     </div>\n// )\n\n// 改造成js的配置，才能获取组件\nexport default [\n    {\n        path:\"/\",\n        component:Index,\n        // loadData:Index.loadData,\n        exact:true,\n        key:'index'\n    },\n    {\n        path:\"/about\",\n        component:About,\n        exact:true,\n        key:'about'\n    },\n    {\n        path:\"/user\",\n        component:User,\n        exact:true,\n        key:'user'\n    },\n    \n]","import React from 'react'\nimport {Link} from 'react-router-dom';\n\n\n\nexport default ()=>{\n    return <div>\n        <Link to=\"/\">首页</Link>|\n        <Link to=\"/about\">关于</Link>|\n        <Link to=\"/user\">user</Link>|\n    </div>\n}","import React from 'react'\n\n\nfunction About(props){\n    return <div>\n        <h1>关于</h1>\n    </div>\n}\n\nexport default About","import React,{useState,useEffect} from 'react'\nimport {connect} from 'react-redux'\nimport {getIndexList} from '../store/index'\n\nfunction Index(props){\n    const [count,setCount] = useState(1)\n    useEffect(()=>{\n        if(!props.list.length){\n            props.getIndexList()\n        }\n        \n    },[])\n    return <div>\n        <h1>hello {props.title}! {count}</h1>\n        <button onClick={()=>{setCount(count+1)}}>add</button>\n        <hr/>\n        <ul>\n            {props.list.map(item=>{\n                return <li key={item.id}>{item.name}</li>\n            })}\n        </ul>\n    </div>\n}\nIndex.loadData = (sotre) =>{\n    return sotre.dispatch(getIndexList())\n}\nexport default connect(\n    state=>({list:state.index.list}),\n    {getIndexList}\n)(Index)","import React from 'react'\nimport {connect} from 'react-redux'\nimport {getIndexList} from '../store/index'\nimport {getUserInfo} from '../store/user'\n\n\nfunction User(props){\n    return <div>\n        <h1>你好 {props.userinfo.name},你们最棒的人是{props.userinfo.best}</h1>\n    </div>\n}\nUser.loadData = (sotre) =>{\n    return sotre.dispatch(getUserInfo())\n}\nexport default connect(\n    state=>({userinfo:state.user.userinfo}),\n    // {getUserInfo}\n)(User)","import Axios from \"axios\"\n\n// 首页的逻辑\n\n//actionType\nconst GET_LIST = 'INDEX/GET_LIST'\n\n// actionCreator\nconst changeList = list => ({\n    type: GET_LIST,\n    list\n})\n\nexport const getIndexList = server => {\n    return(dispatch, getState, $axios)=> {\n        return $axios.get('/api/course/list')\n            .then(res => {\n                const { list } = res.data;\n                dispatch(changeList(list));\n            })\n    }\n}\n\n\nconst defaultState = {\n    list: []\n}\n\nexport default (state = defaultState, action) => {\n    switch (action.type) {\n        case GET_LIST:\n            const newState = {\n                ...state,\n                list: action.list\n            }\n            return newState\n        default:\n            return state\n    }\n}","// 存储的入口\nimport {createStore,applyMiddleware,combineReducers} from 'redux'\nimport thunk from 'redux-thunk'\nimport Axios from 'axios'\nimport indexReducer from './index'\nimport userReducer from './user'\n\n\nconst reducer = combineReducers({\n    index:indexReducer,\n    user:userReducer\n})\n\nconst clientAxios = Axios.create({\n    baseURL:'/'\n})\nconst serverAxios = Axios.create({\n    baseURL:'http://localhost:9090/'\n})\n\n// export default store\nexport const getServerStore = () =>{\n    // 服务端通过server的dispatch获取和填充\n    return createStore(reducer,applyMiddleware(thunk.withExtraArgument(serverAxios)))\n}\nexport const getClientStore = () =>{\n    // 浏览器端\n    const defaultState = window._context ?window._context :{}\n    return createStore(reducer,defaultState,applyMiddleware(thunk.withExtraArgument(clientAxios)))\n}\n","import Axios from \"axios\"\n\n// 首页的逻辑\n\n//actionType\nconst GET_LIST = 'INDEX/USER_INFO'\n\n// actionCreator\nconst changeUserInfo = data => ({\n    type: GET_LIST,\n    data\n})\n\nexport const getUserInfo = server => {\n    return(dispatch, getState, $axios)=> {\n        return $axios.get('api/user/info')\n            .then(res => {\n                const { data } = res.data;\n                console.log('用户信息',data)\n                dispatch(changeUserInfo(data));\n            })\n    }\n}\n\n\nconst defaultState = {\n    userinfo: {}\n}\n\nexport default (state = defaultState, action) => {\n    switch (action.type) {\n        case GET_LIST:\n            const newState = {\n                ...state,\n                userinfo: action.data\n            }\n            return newState\n        default:\n            return state\n    }\n}","module.exports = require(\"axios\");","module.exports = require(\"express\");","module.exports = require(\"http-proxy-middleware\");","module.exports = require(\"react\");","module.exports = require(\"react-dom/server\");","module.exports = require(\"react-redux\");","module.exports = require(\"react-router-dom\");","module.exports = require(\"redux\");","module.exports = require(\"redux-thunk\");"],"sourceRoot":""}